<ng-container *ngIf="!showAddress">
    <div fxLayout="column" *ngIf="(items$ | async)!= null && (items$ | async).length > 0">
        <div fxLayout="row" fxLayoutAlign="space-between none" *ngFor="let service of items$ | async">
            <h4>{{service.name}}</h4>
            <div fxLayout="row" *ngIf="service.quantity > 0">
                <button mat-icon-button aria-label="Example icon button with a vertical three dot icon"
                    (click)="decreaseQuantity(service)">
                    <mat-icon>remove</mat-icon>
                </button>
                <h4>{{service.quantity}}</h4>
                <button mat-icon-button aria-label="Example icon button with a vertical three dot icon"
                    (click)="service.quantity= service.quantity + 1">
                    <mat-icon>add</mat-icon>
                </button>
            </div>
            <mat-form-field appearance="fill">
                <mat-label>Choose a date</mat-label>
                <input matInput type="datetime-local" required min="2022-08-10T00:00:00" [(ngModel)]="service.date">
                <mat-hint>MM/DD/YYYY</mat-hint>
            </mat-form-field>
        </div>
        <!-- <mat-card class="example-card" *ngFor="let service of items$ | async">
            <mat-card-title>{{service.name}}</mat-card-title>
            <mat-card-subtitle>{{service.rate}}</mat-card-subtitle>
            <mat-card-content>
                <p>This card indeterminates progress bar.</p> -->
        <!-- <p>{{longText}}</p> -->
        <!-- </mat-card-content>
            <mat-card-actions>
                <div fxLayout="row">
                    <button mat-button color="warn" (click)="onAddToCart(service)" *ngIf="service.quantity === 0">Add to
                        Cart</button>
                    <div fxLayout="row" *ngIf="service.quantity > 0">
                        <button mat-icon-button aria-label="Example icon button with a vertical three dot icon"
                            (click)="decreaseQuantity(service)">
                            <mat-icon>remove</mat-icon>
                        </button>
                        <h4>{{service.quantity}}</h4>
                        <button mat-icon-button aria-label="Example icon button with a vertical three dot icon"
                            (click)="service.quantity= service.quantity + 1">
                            <mat-icon>add</mat-icon>
                        </button>
                    </div>
                    <button mat-button>SHARE</button>
                </div>
            </mat-card-actions>
        </mat-card> -->
        <app-message [messages$]="messages$"></app-message>
        <button mat-raised-button type="submit" color="primary" (click)="showAddress=true">Go to Checkout</button>
    </div>
    <ng-container *ngIf="(items$ | async)!= null && (items$ | async).length === 0">
        <h4>Cart is currently empty</h4>
        <button mat-button color="primary" [routerLink]="['/']">
            Continue Shopping
        </button>
    </ng-container>

</ng-container>
<div *ngIf="showAddress" style="width: 300px;">
    <mat-stepper linear labelPosition="bottom" #stepper>
        <mat-step [stepControl]="firstFormGroup">
            <form [formGroup]="firstFormGroup">
                <ng-template matStepLabel>Fill out your details</ng-template>
                <div fxLayout="column" fxLayoutGap="3px">
                    <mat-form-field appearance="fill">
                        <mat-label>Name</mat-label>
                        <input matInput placeholder="Last name, First name" formControlName="name"
                            [(ngModel)]="model.name">
                    </mat-form-field>
                    <mat-form-field appearance="fill">
                        <mat-label>Address Line 1</mat-label>
                        <input matInput placeholder="Address Line 1" formControlName="address_line1"
                            [(ngModel)]="model.addressLine1">
                    </mat-form-field>
                    <mat-form-field appearance="fill">
                        <mat-label>Address Line 2</mat-label>
                        <input matInput placeholder="Address Line 2" formControlName="address_line2"
                            [(ngModel)]="model.addressLine2">
                    </mat-form-field>
                    <mat-form-field appearance="fill">
                        <mat-label>City</mat-label>
                        <input matInput placeholder="City" formControlName="city" [(ngModel)]="model.city">
                    </mat-form-field>
                    <mat-form-field appearance="fill">
                        <mat-label>State</mat-label>
                        <input matInput placeholder="State" formControlName="state" [(ngModel)]="model.state">
                    </mat-form-field>
                    <mat-form-field appearance="fill">
                        <mat-label>Pincode</mat-label>
                        <input matInput placeholder="Pincode" formControlName="pincode" [(ngModel)]="model.pincode">
                    </mat-form-field>
                    <mat-form-field appearance="fill">
                        <mat-label>Email Address</mat-label>
                        <input matInput placeholder="Email Address" formControlName="email_address"
                            [(ngModel)]="model.email">
                    </mat-form-field>
                    <mat-form-field appearance="fill">
                        <mat-label>Phone no.</mat-label>
                        <input matInput placeholder="Phone No." formControlName="phone" [(ngModel)]="model.phone">
                    </mat-form-field>
                    <div>
                        <button mat-stroked-button class="m-3" color="primary" matStepperNext>Next</button>
                    </div>
                </div>
            </form>
        </mat-step>
        <mat-step>
            <ng-template matStepLabel>Done</ng-template>
            <p>You are now done.</p>
            <div>
                <button mat-stroked-button class="m-3" color="primary" matStepperPrevious>Back</button>
                <button mat-stroked-button type="submit" color="primary" (click)="onPlaceOrder()">Place Order</button>
            </div>
        </mat-step>
    </mat-stepper>
</div>